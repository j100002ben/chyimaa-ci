/*
 @author Benjamin Arthur Lupton <contact@balupton.com>
 @author James Padolsey <https://gist.github.com/527683>
 New BSD License <http://creativecommons.org/licenses/BSD/>
*/
window.JSON||(window.JSON={},function(){function d(b){return 10>b?"0"+b:b}function m(b){c.lastIndex=0;return c.test(b)?'"'+b.replace(c,function(b){var a=l[b];return"string"===typeof a?a:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function k(b,c){var a,d,n,f,j=g,r,p=c[b];p&&("object"===typeof p&&"function"===typeof p.toJSON)&&(p=p.toJSON(b));"function"===typeof h&&(p=h.call(c,b,p));switch(typeof p){case "string":return m(p);case "number":return isFinite(p)?String(p):"null";
case "boolean":case "null":return String(p);case "object":if(!p)return"null";g+=e;r=[];if("[object Array]"===Object.prototype.toString.apply(p)){f=p.length;for(a=0;a<f;a+=1)r[a]=k(a,p)||"null";n=0===r.length?"[]":g?"[\n"+g+r.join(",\n"+g)+"\n"+j+"]":"["+r.join(",")+"]";g=j;return n}if(h&&"object"===typeof h){f=h.length;for(a=0;a<f;a+=1)d=h[a],"string"===typeof d&&(n=k(d,p))&&r.push(m(d)+(g?": ":":")+n)}else for(d in p)Object.hasOwnProperty.call(p,d)&&(n=k(d,p))&&r.push(m(d)+(g?": ":":")+n);n=0===
r.length?"{}":g?"{\n"+g+r.join(",\n"+g)+"\n"+j+"}":"{"+r.join(",")+"}";g=j;return n}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+d(this.getUTCMonth()+1)+"-"+d(this.getUTCDate())+"T"+d(this.getUTCHours())+":"+d(this.getUTCMinutes())+":"+d(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,e,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,a){var d;e=g="";if("number"===typeof a)for(d=0;d<a;d+=1)e+=" ";else"string"===typeof a&&(e=a);if((h=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return k("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(c,d){function a(b,f){var j,r,c=b[f];if(c&&"object"===typeof c)for(j in c)Object.hasOwnProperty.call(c,j)&&(r=a(c,j),void 0!==r?c[j]=r:delete c[j]);return d.call(b,f,c)}var h;c=String(c);b.lastIndex=0;b.test(c)&&(c=c.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return h=eval("("+c+")"),"function"===typeof d?a({"":h},""):h;throw new SyntaxError("JSON.parse");})}());
(function(d,m){function k(c,d){var g=d.__amplify__?JSON.parse(d.__amplify__):{};b.addType(c,function(a,e,l){var f=e,j=(new Date).getTime();if(!a){f={};for(a in g)e=(e=d[a])?JSON.parse(e):{expires:-1},e.expires&&e.expires<=j?(delete d[a],delete g[a]):f[a.replace(/^__amplify__/,"")]=e.data;d.__amplify__=JSON.stringify(g);return f}a="__amplify__"+a;if(e===m){if(g[a])if(e=(e=d[a])?JSON.parse(e):{expires:-1},e.expires&&e.expires<=j)delete d[a],delete g[a];else return e.data}else if(null===e)delete d[a],
delete g[a];else{e=JSON.stringify({data:e,expires:l.expires?j+l.expires:null});try{d[a]=e,g[a]=!0}catch(r){b[c]();try{d[a]=e,g[a]=!0}catch(p){throw b.error();}}}d.__amplify__=JSON.stringify(g);return f})}JSON.stringify=JSON.stringify||JSON.encode;JSON.parse=JSON.parse||JSON.decode;var b=d.store=function(c,d,e,a){a=b.type;e&&(e.type&&e.type in b.types)&&(a=e.type);return b.types[a](c,d,e||{})};b.types={};b.type=null;b.addType=function(c,d){b.type||(b.type=c);b.types[c]=d;b[c]=function(d,a,e){e=e||
{};e.type=c;return b(d,a,e)}};b.error=function(){return"amplify.store quota exceeded"};for(var c in{localStorage:1,sessionStorage:1})try{window[c].getItem&&k(c,window[c])}catch(g){}window.globalStorage&&(k("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===b.type&&(b.type="globalStorage"));var e=document.createElement("div"),l;e.style.display="none";document.getElementsByTagName("head")[0].appendChild(e);e.addBehavior&&(e.addBehavior("#default#userdata"),e.load("amplify"),
l=e.getAttribute("amplify")?JSON.parse(e.getAttribute("amplify")):{},b.addType("userData",function(c,d,g){var a=d,k=(new Date).getTime(),n,f;if(!c){a={};for(c in l)n=(d=e.getAttribute(c))?JSON.parse(d):{expires:-1},n.expires&&n.expires<=k?(e.removeAttribute(c),delete l[c]):a[c]=n.data;e.setAttribute("amplify",JSON.stringify(l));e.save("amplify");return a}c=c.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");if(d===m){if(c in l)if(n=
(d=e.getAttribute(c))?JSON.parse(d):{expires:-1},n.expires&&n.expires<=k)e.removeAttribute(c),delete l[c];else return n.data}else null===d?(e.removeAttribute(c),delete l[c]):(f=e.getAttribute(c),n=JSON.stringify({data:d,expires:g.expires?k+g.expires:null}),e.setAttribute(c,n),l[c]=!0);e.setAttribute("amplify",JSON.stringify(l));try{e.save("amplify")}catch(j){null===f?(e.removeAttribute(c),delete l[c]):e.setAttribute(c,f);b.userData();try{e.setAttribute(c,n),l[c]=!0,e.save("amplify")}catch(r){throw null===
f?(e.removeAttribute(c),delete l[c]):e.setAttribute(c,f),b.error();}}return a}));k("memory",{})})(this.amplify=this.amplify||{});(function(d){var m=d.History=d.History||{},k=d.jQuery;if("undefined"!==typeof m.Adapter)throw Error("History.js Adapter has already been loaded...");m.Adapter={bind:function(b,c,d){k(b).bind(c,d)},trigger:function(b,c){k(b).trigger(c)},onDomLoad:function(b){k(b)}};"undefined"!==typeof m.init&&m.init()})(window);
(function(d,m){var k=d.console||m,b=d.document,c=d.navigator,g=d.amplify||!1,e=d.setTimeout,l=d.clearTimeout,h=d.setInterval,s=d.clearInterval,q=d.JSON,a=d.History=d.History||{},t=d.history;q.stringify=q.stringify||q.encode;q.parse=q.parse||q.decode;if("undefined"!==typeof a.init)throw Error("History.js Core has already been loaded...");a.init=function(){if("undefined"===typeof a.Adapter)return!1;"undefined"!==typeof a.initCore&&a.initCore();"undefined"!==typeof a.initHtml4&&a.initHtml4();return!0};
a.initCore=function(){if("undefined"!==typeof a.initCore.initialized)return!1;a.initCore.initialized=!0;a.options=a.options||{};a.options.hashChangeInterval=a.options.hashChangeInterval||100;a.options.safariPollInterval=a.options.safariPollInterval||500;a.options.doubleCheckInterval=a.options.doubleCheckInterval||500;a.options.storeInterval=a.options.storeInterval||1E3;a.options.busyDelay=a.options.busyDelay||250;a.options.debug=a.options.debug||!1;a.options.initialTitle=a.options.initialTitle||b.title;
a.intervalList=[];a.clearAllIntervals=function(){var f,b=a.intervalList;if("undefined"!==typeof b&&null!==b){for(f=0;f<b.length;f++)s(b[f]);a.intervalList=null}};a.Adapter.bind(d,"beforeunload",a.clearAllIntervals);a.Adapter.bind(d,"unload",a.clearAllIntervals);a.debug=function(){a.options.debug&&a.log.apply(a,arguments)};a.log=function(){var a=!("undefined"===typeof k||"undefined"===typeof k.log||"undefined"===typeof k.log.apply),j=b.getElementById("log"),c,d,e;a?(d=Array.prototype.slice.call(arguments),
c=d.shift(),"undefined"!==typeof k.debug?k.debug.apply(k,[c,d]):k.log.apply(k,[c,d])):c="\n"+arguments[0]+"\n";d=1;for(e=arguments.length;d<e;++d){var g=arguments[d];if("object"===typeof g&&"undefined"!==typeof q)try{g=q.stringify(g)}catch(h){}c+="\n"+g+"\n"}j?(j.value+=c+"\n-----\n",j.scrollTop=j.scrollHeight-j.clientHeight):a||alert(c);return!0};a.getInternetExplorerMajorVersion=function(){var f=a.getInternetExplorerMajorVersion,j;if("undefined"!==typeof a.getInternetExplorerMajorVersion.cached)j=
a.getInternetExplorerMajorVersion.cached;else{j=3;for(var c=b.createElement("div"),d=c.getElementsByTagName("i");(c.innerHTML="\x3c!--[if gt IE "+ ++j+"]><i></i><![endif]--\x3e")&&d[0];);j=4<j?j:!1}return f.cached=j};a.isInternetExplorer=function(){return a.isInternetExplorer.cached="undefined"!==typeof a.isInternetExplorer.cached?a.isInternetExplorer.cached:Boolean(a.getInternetExplorerMajorVersion())};a.emulated={pushState:!Boolean(d.history&&d.history.pushState&&d.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(c.userAgent)||
/AppleWebKit\/5([0-2]|3[0-2])/i.test(c.userAgent))),hashChange:Boolean(!("onhashchange"in d||"onhashchange"in b)||a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion())};a.enabled=!a.emulated.pushState;a.bugs={setHash:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===c.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(c.userAgent)),safariPoll:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===c.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(c.userAgent)),ieDoubleCheck:Boolean(a.isInternetExplorer()&&
8>a.getInternetExplorerMajorVersion()),hashEscape:Boolean(a.isInternetExplorer()&&7>a.getInternetExplorerMajorVersion())};a.isEmptyObject=function(a){for(var b in a)return!1;return!0};a.cloneObject=function(a){a?(a=q.stringify(a),a=q.parse(a)):a={};return a};a.getRootUrl=function(){var a=b.location.protocol+"//"+(b.location.hostname||b.location.host);b.location.port&&(a+=":"+b.location.port);return a+"/"};a.getBaseHref=function(){var a=b.getElementsByTagName("base"),j=null,j="";1===a.length&&(j=a[0],
j=j.href.replace(/[^\/]+$/,""));(j=j.replace(/\/+$/,""))&&(j+="/");return j};a.getBaseUrl=function(){return a.getBaseHref()||a.getBasePageUrl()||a.getRootUrl()};a.getPageUrl=function(){return((a.getState(!1,!1)||{}).url||b.location.href).replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})};a.getBasePageUrl=function(){return b.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};a.getFullUrl=function(f,b){var c=
f,d=f.substring(0,1);b="undefined"===typeof b?!0:b;/[a-z]+\:\/\//.test(f)||(c="/"===d?a.getRootUrl()+f.replace(/^\/+/,""):"#"===d?a.getPageUrl().replace(/#.*/,"")+f:"?"===d?a.getPageUrl().replace(/[\?#].*/,"")+f:b?a.getBaseUrl()+f.replace(/^(\.\/)+/,""):a.getBasePageUrl()+f.replace(/^(\.\/)+/,""));return c.replace(/\#$/,"")};a.getShortUrl=function(f){var b=a.getBaseUrl(),c=a.getRootUrl();a.emulated.pushState&&(f=f.replace(b,""));f=f.replace(c,"/");a.isTraditionalAnchor(f)&&(f="./"+f);return f=f.replace(/^(\.\/)+/g,
"./").replace(/\#$/,"")};a.store=g?g.store("History.store")||{}:{};a.store.idToState=a.store.idToState||{};a.store.urlToId=a.store.urlToId||{};a.store.stateToId=a.store.stateToId||{};a.idToState=a.idToState||{};a.stateToId=a.stateToId||{};a.urlToId=a.urlToId||{};a.storedStates=a.storedStates||[];a.savedStates=a.savedStates||[];a.getState=function(f,b){"undefined"===typeof f&&(f=!0);"undefined"===typeof b&&(b=!0);var c=a.getLastSavedState();!c&&b&&(c=a.createStateObject());f&&(c=a.cloneObject(c),c.url=
c.cleanUrl||c.url);return c};a.getIdByState=function(f){var b=a.extractId(f.url);if(!b){var c=a.getStateString(f);if("undefined"!==typeof a.stateToId[c])b=a.stateToId[c];else if("undefined"!==typeof a.store.stateToId[c])b=a.store.stateToId[c];else{for(;!(b=String(Math.floor(1E3*Math.random())),"undefined"===typeof a.idToState[b]&&"undefined"===typeof a.store.idToState[b]););a.stateToId[c]=b;a.idToState[b]=f}}return b};a.normalizeState=function(f){if(!f||"object"!==typeof f)f={};if("undefined"!==typeof f.normalized)return f;
if(!f.data||"object"!==typeof f.data)f.data={};var c={normalized:!0};c.title=f.title||"";c.url=a.getFullUrl(a.unescapeString(f.url||b.location.href));c.hash=a.getShortUrl(c.url);c.data=a.cloneObject(f.data);c.id=a.getIdByState(c);c.cleanUrl=c.url.replace(/\??\&_suid.*/,"");c.url=c.cleanUrl;f=!a.isEmptyObject(c.data);if(c.title||f)c.hash=a.getShortUrl(c.url).replace(/\??\&_suid.*/,""),/\?/.test(c.hash)||(c.hash+="?"),c.hash+="&_suid="+c.id;c.hashedUrl=a.getFullUrl(c.hash);if((a.emulated.pushState||
a.bugs.safariPoll)&&a.hasUrlDuplicate(c))c.url=c.hashedUrl;return c};a.createStateObject=function(f,b,c){f={data:f,title:b,url:c};return f=a.normalizeState(f)};a.getStateById=function(f){f=String(f);return a.idToState[f]||a.store.idToState[f]||m};a.getStateString=function(f){f={data:a.normalizeState(f).data,title:f.title,url:f.url};return q.stringify(f)};a.getStateId=function(f){return a.normalizeState(f).id};a.getHashByState=function(f){return a.normalizeState(f).hash};a.extractId=function(a){return((a=
/(.*)\&_suid=([0-9]+)$/.exec(a))?String(a[2]||""):"")||!1};a.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};a.extractState=function(b,c){var d=null;c=c||!1;var e=a.extractId(b);e&&(d=a.getStateById(e));if(!d){var g=a.getFullUrl(b);(e=a.getIdByUrl(g)||!1)&&(d=a.getStateById(e));!d&&(c&&!a.isTraditionalAnchor(b))&&(d=a.createStateObject(null,null,g))}return d};a.getIdByUrl=function(b){return a.urlToId[b]||a.store.urlToId[b]||m};a.getLastSavedState=function(){return a.savedStates[a.savedStates.length-
1]||m};a.getLastStoredState=function(){return a.storedStates[a.storedStates.length-1]||m};a.hasUrlDuplicate=function(b){var c=!1;return c=(c=a.extractState(b.url))&&c.id!==b.id};a.storeState=function(b){a.urlToId[b.url]=b.id;a.storedStates.push(a.cloneObject(b));return b};a.isLastSavedState=function(b){var c=!1;a.savedStates.length&&(b=b.id,c=a.getLastSavedState().id,c=b===c);return c};a.saveState=function(b){if(a.isLastSavedState(b))return!1;a.savedStates.push(a.cloneObject(b));return!0};a.getStateByIndex=
function(b){var c=null;return c="undefined"===typeof b?a.savedStates[a.savedStates.length-1]:0>b?a.savedStates[a.savedStates.length+b]:a.savedStates[b]};a.getHash=function(){return a.unescapeHash(b.location.hash)};a.unescapeString=function(a){for(var b;;){b=d.unescape(a);if(b===a)break;a=b}return a};a.unescapeHash=function(b){b=a.normalizeHash(b);return b=a.unescapeString(b)};a.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};a.setHash=function(c,d){if(!1!==d&&a.busy())return a.pushQueue({scope:a,
callback:a.setHash,args:arguments,queue:d}),!1;var e=a.escapeHash(c);a.busy(!0);var g=a.extractState(c,!0);g&&!a.emulated.pushState?a.pushState(g.data,g.title,g.url,!1):b.location.hash!==e&&(a.bugs.setHash?(g=a.getPageUrl(),a.pushState(null,null,g+"#"+e,!1)):b.location.hash=e);return a};a.escapeHash=function(b){b=a.normalizeHash(b);b=d.escape(b);a.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?"));return b};a.getHashByUrl=function(b){b=String(b).replace(/([^#]*)#?([^#]*)#?(.*)/,
"$2");return b=a.unescapeHash(b)};a.setTitle=function(c){var d=c.title;if(!d){var e=a.getStateByIndex(0);e&&e.url===c.url&&(d=e.title||a.options.initialTitle)}try{b.getElementsByTagName("title")[0].innerHTML=d.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(g){}b.title=d;return a};a.queues=[];a.busy=function(b){"undefined"!==typeof b?a.busy.flag=b:"undefined"===typeof a.busy.flag&&(a.busy.flag=!1);if(!a.busy.flag){l(a.busy.timeout);var c=function(){if(!a.busy.flag)for(var b=
a.queues.length-1;0<=b;--b){var f=a.queues[b];0!==f.length&&(f=f.shift(),a.fireQueueItem(f),a.busy.timeout=e(c,a.options.busyDelay))}};a.busy.timeout=e(c,a.options.busyDelay)}return a.busy.flag};a.fireQueueItem=function(b){return b.callback.apply(b.scope||a,b.args||[])};a.pushQueue=function(b){a.queues[b.queue||0]=a.queues[b.queue||0]||[];a.queues[b.queue||0].push(b);return a};a.queue=function(b,c){"function"===typeof b&&(b={callback:b});"undefined"!==typeof c&&(b.queue=c);a.busy()?a.pushQueue(b):
a.fireQueueItem(b);return a};a.clearQueue=function(){a.busy.flag=!1;a.queues=[];return a};a.stateChanged=!1;a.doubleChecker=!1;a.doubleCheckComplete=function(){a.stateChanged=!0;a.doubleCheckClear();return a};a.doubleCheckClear=function(){a.doubleChecker&&(l(a.doubleChecker),a.doubleChecker=!1);return a};a.doubleCheck=function(b){a.stateChanged=!1;a.doubleCheckClear();a.bugs.ieDoubleCheck&&(a.doubleChecker=e(function(){a.doubleCheckClear();a.stateChanged||b();return!0},a.options.doubleCheckInterval));
return a};a.safariStatePoll=function(){var c=a.extractState(b.location.href);if(!a.isLastSavedState(c))return c||a.createStateObject(),a.Adapter.trigger(d,"popstate"),a};a.back=function(b){if(!1!==b&&a.busy())return a.pushQueue({scope:a,callback:a.back,args:arguments,queue:b}),!1;a.busy(!0);a.doubleCheck(function(){a.back(!1)});t.go(-1);return!0};a.forward=function(b){if(!1!==b&&a.busy())return a.pushQueue({scope:a,callback:a.forward,args:arguments,queue:b}),!1;a.busy(!0);a.doubleCheck(function(){a.forward(!1)});
t.go(1);return!0};a.go=function(b,c){var d;if(0<b)for(d=1;d<=b;++d)a.forward(c);else if(0>b)for(d=-1;d>=b;--d)a.back(c);else throw Error("History.go: History.go requires a positive or negative integer passed.");return a};a.saveState(a.storeState(a.extractState(b.location.href,!0)));g&&(a.onUnload=function(){var b=g.store("History.store")||{},c;b.idToState=b.idToState||{};b.urlToId=b.urlToId||{};b.stateToId=b.stateToId||{};for(c in a.idToState)a.idToState.hasOwnProperty(c)&&(b.idToState[c]=a.idToState[c]);
for(c in a.urlToId)a.urlToId.hasOwnProperty(c)&&(b.urlToId[c]=a.urlToId[c]);for(c in a.stateToId)a.stateToId.hasOwnProperty(c)&&(b.stateToId[c]=a.stateToId[c]);a.store=b;g.store("History.store",b)},a.intervalList.push(h(a.onUnload,a.options.storeInterval)),a.Adapter.bind(d,"beforeunload",a.onUnload),a.Adapter.bind(d,"unload",a.onUnload));if(a.emulated.pushState){var n=function(){};a.pushState=a.pushState||n;a.replaceState=a.replaceState||n}else if(a.onPopState=function(c){a.doubleCheckComplete();
var e=a.getHash();if(e)return(c=a.extractState(e||b.location.href,!0))?a.replaceState(c.data,c.title,c.url,!1):(a.Adapter.trigger(d,"anchorchange"),a.busy(!1)),a.expectedStateId=!1;e=!1;c=c||{};"undefined"===typeof c.state&&("undefined"!==typeof c.originalEvent&&"undefined"!==typeof c.originalEvent.state?c.state=c.originalEvent.state||!1:"undefined"!==typeof c.event&&"undefined"!==typeof c.event.state&&(c.state=c.event.state||!1));c.state=c.state||!1;(e=c.state?a.getStateById(c.state):a.expectedStateId?
a.getStateById(a.expectedStateId):a.extractState(b.location.href))||(e=a.createStateObject(null,null,b.location.href));a.expectedStateId=!1;if(a.isLastSavedState(e))return a.busy(!1),!1;a.storeState(e);a.saveState(e);a.setTitle(e);a.Adapter.trigger(d,"statechange");a.busy(!1);return!0},a.Adapter.bind(d,"popstate",a.onPopState),a.pushState=function(b,c,e,g){if(a.getHashByUrl(e)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==
g&&a.busy())return a.pushQueue({scope:a,callback:a.pushState,args:arguments,queue:g}),!1;a.busy(!0);var h=a.createStateObject(b,c,e);a.isLastSavedState(h)?a.busy(!1):(a.storeState(h),a.expectedStateId=h.id,t.pushState(h.id,h.title,h.url),a.Adapter.trigger(d,"popstate"));return!0},a.replaceState=function(b,c,e,g){if(a.getHashByUrl(e)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==g&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,
args:arguments,queue:g}),!1;a.busy(!0);var h=a.createStateObject(b,c,e);a.isLastSavedState(h)?a.busy(!1):(a.storeState(h),a.expectedStateId=h.id,t.replaceState(h.id,h.title,h.url),a.Adapter.trigger(d,"popstate"));return!0},a.bugs.safariPoll&&a.intervalList.push(h(a.safariStatePoll,a.options.safariPollInterval)),"Apple Computer, Inc."===c.vendor||"Mozilla"===(c.appCodeName||""))if(a.Adapter.bind(d,"hashchange",function(){a.Adapter.trigger(d,"popstate")}),a.getHash())a.Adapter.onDomLoad(function(){a.Adapter.trigger(d,
"hashchange")})};a.init()})(window);
(function(d){var m=d.document,k=d.setInterval||k,b=d.History=d.History||{};if("undefined"!==typeof b.initHtml4)throw Error("History.js HTML4 Support has already been loaded...");b.initHtml4=function(){if("undefined"!==typeof b.initHtml4.initialized)return!1;b.initHtml4.initialized=!0;b.enabled=!0;b.savedHashes=[];b.isLastHash=function(c){var d=b.getHashByIndex();return c===d};b.saveHash=function(c){if(b.isLastHash(c))return!1;b.savedHashes.push(c);return!0};b.getHashByIndex=function(c){var d=null;
return d="undefined"===typeof c?b.savedHashes[b.savedHashes.length-1]:0>c?b.savedHashes[b.savedHashes.length+c]:b.savedHashes[c]};b.discardedHashes={};b.discardedStates={};b.discardState=function(c,d,e){var l=b.getHashByState(c);b.discardedStates[l]={discardedState:c,backState:e,forwardState:d};return!0};b.discardHash=function(c,d,e){b.discardedHashes[c]={discardedHash:c,backState:e,forwardState:d};return!0};b.discardedState=function(c){c=b.getHashByState(c);return b.discardedStates[c]||!1};b.discardedHash=
function(c){return b.discardedHashes[c]||!1};b.recycleState=function(c){var d=b.getHashByState(c);b.discardedState(c)&&delete b.discardedStates[d];return!0};b.emulated.hashChange&&(b.hashChangeInit=function(){b.checkerFunction=null;var c="";if(b.isInternetExplorer()){var g=m.createElement("iframe");g.setAttribute("id","historyjs-iframe");g.style.display="none";m.body.appendChild(g);g.contentWindow.document.open();g.contentWindow.document.close();var e="",l=!1;b.checkerFunction=function(){if(l)return!1;
l=!0;var h=b.getHash()||"",k=b.unescapeHash(g.contentWindow.document.location.hash)||"";h!==c?(c=h,k!==h&&(e=h,g.contentWindow.document.open(),g.contentWindow.document.close(),g.contentWindow.document.location.hash=b.escapeHash(h)),b.Adapter.trigger(d,"hashchange")):k!==e&&(e=k,b.setHash(k,!1));l=!1;return!0}}else b.checkerFunction=function(){var e=b.getHash();e!==c&&(c=e,b.Adapter.trigger(d,"hashchange"));return!0};b.intervalList.push(k(b.checkerFunction,b.options.hashChangeInterval));return!0},
b.Adapter.onDomLoad(b.hashChangeInit));if(b.emulated.pushState&&(b.onHashChange=function(c){var g=b.getHashByUrl(c&&c.newURL||m.location.href);c=null;if(b.isLastHash(g))return b.busy(!1),!1;b.doubleCheckComplete();b.saveHash(g);if(g&&b.isTraditionalAnchor(g))return b.Adapter.trigger(d,"anchorchange"),b.busy(!1),!1;c=b.extractState(b.getFullUrl(g||m.location.href,!1),!0);if(b.isLastSavedState(c))return b.busy(!1),!1;b.getHashByState(c);if(g=b.discardedState(c))return b.getHashByIndex(-2)===b.getHashByState(g.forwardState)?
b.back(!1):b.forward(!1),!1;b.pushState(c.data,c.title,c.url,!1);return!0},b.Adapter.bind(d,"hashchange",b.onHashChange),b.pushState=function(c,g,e,k){if(b.getHashByUrl(e))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==k&&b.busy())return b.pushQueue({scope:b,callback:b.pushState,args:arguments,queue:k}),!1;b.busy(!0);var h=b.createStateObject(c,g,e),s=b.getHashByState(h),q=b.getState(!1),q=b.getHashByState(q),a=b.getHash();b.storeState(h);b.expectedStateId=
h.id;b.recycleState(h);b.setTitle(h);if(s===q)return b.busy(!1),!1;if(s!==a&&s!==b.getShortUrl(m.location.href))return b.setHash(s,!1),!1;b.saveState(h);b.Adapter.trigger(d,"statechange");b.busy(!1);return!0},b.replaceState=function(c,d,e,k){if(b.getHashByUrl(e))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==k&&b.busy())return b.pushQueue({scope:b,callback:b.replaceState,args:arguments,queue:k}),!1;b.busy(!0);var h=b.createStateObject(c,d,e),
m=b.getState(!1),q=b.getStateByIndex(-2);b.discardState(m,h,q);b.pushState(h.data,h.title,h.url,!1);return!0},b.getHash()&&!b.emulated.hashChange))b.Adapter.onDomLoad(function(){b.Adapter.trigger(d,"hashchange")})};b.init()})(window);